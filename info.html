<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
  </head>
  <body>
    <script>
      var x = 1;
      var obj = {
        x: 2,
        fn: (function (x) {
          // 立即执行函数传入的obj.x = 2
          // this==>window

          // window.x=1  x=2
          this.x *= x++;

          // window.x=2  x=3
          return function (y) {
            // 第一次this=>obj  第二次this=>window
            // 函数调用传入参数 2
            //  window.x=2  x=3
            // console.log(x, y);
            x += y;

            //   window.x=2  x=5
            this.x *= ++x; // x=2

            // obj.x=12  x=6
            console.log(this.x); // 12  16
            console.log(x); // 6  8
          };
        })(2),
      };

      obj.fn(2);

      var fn = obj.fn;
      window.fn(1);

      console.log(obj.x, x);
    </script>
  </body>
</html>
